<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>House conditions</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <link rel="stylesheet" href="styles.css">
      </head>
      <body>
        <nav class="navbar fixed-top navbar-expand-md navbar-dark bg-primary mb-3">
            <div class="flex-row d-flex">
                <button type="button" class="navbar-toggler mr-2 " data-toggle="offcanvas" title="Toggle responsive left sidebar">
                      <span class="navbar-toggler-icon"></span>
                </button>
                <a class="navbar-brand" style="margin-left: 5%;" href="#">House Conditions</a>
            </div>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsingNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="navbar-collapse collapse" id="collapsingNavbar">
                <!-- <ul class="navbar-nav">
                    <li class="nav-item active">
                        <a class="nav-link" href="#">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="//www.codeply.com">Link</a>
                    </li>
                </ul>
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#myAlert" data-toggle="collapse">Alert</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="" data-target="#myModal" data-toggle="modal">About</a>
                    </li>
                </ul> -->
            </div>
        </nav>
        <div class="container-fluid" id="main">
            <div class="row row-offcanvas row-offcanvas-left">
                <div class="col-md-3 col-lg-2 sidebar-offcanvas bg-light pl-0" id="sidebar" role="navigation">
                    <ul class="nav flex-column sticky-top pl-0 pt-5 mt-3">
                        <li class="nav-item"><a class="nav-link" href="#">Overview</a></li>
                        <li class="nav-item">
                            <a class="nav-link" href="#submenu1" data-toggle="collapse" data-target="#submenu1">Reports▾</a>
                            <ul class="list-unstyled flex-column pl-3 collapse" id="submenu1" aria-expanded="false">
                                <li class="nav-item"><a class="nav-link" href="">Report 1</a></li>
                                <li class="nav-item"><a class="nav-link" href="">Report 2</a></li>
                            </ul>
                        </li>
                        <li class="nav-item"><a class="nav-link" href="#">Export</a></li>
                    </ul>
                </div>
                <!--/col-->
                <div class="col main pt-5 mt-3">
                    <!-- <h1 class="display-4 d-none d-sm-block"> House Conditions </h1> -->
                    <p><b>Date/Time:</b> <span id="monitor-date"></span></p>
                    <div class="alert alert-warning fade collapse" role="alert" id="myAlert">
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">×</span>
                            <span class="sr-only">Close</span>
                        </button>
                        <strong>Holy guacamole!</strong> It's free.. this is an example theme. </div>
                    <div class="row mb-3">
                        <div class="col-xl-4 col-sm-6 py-2">
                            <div id="temperature-card" class="card text-white h-100">
                                <div class="card-body" id="temperature-card-body">
                                    <div class="rotate">
                                        <i class="fa fa-user fa-4x"></i>
                                    </div>
                                    <h6 class="text-uppercase">Temperature</h6>
                                    <h1 class="display-4" id="temperature"></h1>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-4 col-sm-6 py-2">
                            <div id="humidity-card" class="card text-white h-100">
                                <div d="humidity-card-body" class="card-body bg-danger">
                                    <div class="rotate">
                                        <i class="fa fa-list fa-4x"></i>
                                    </div>
                                    <h6 class="text-uppercase">Humidity</h6>
                                    <h1 class="display-4" id="humidity">87</h1>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-4 col-sm-6 py-2">
                            <div id="light-card" class="card text-white bg-info h-100">
                                <div id="light-card-body" class="card-body bg-info">
                                    <div class="rotate">
                                        <i class="fa fa-twitter fa-4x"></i>
                                    </div>
                                    <h6 class="text-uppercase">Light</h6>
                                    <h1 class="display-4" id="light">125</h1>
                                </div>
                            </div>
                        </div>
                    </div>
                    <a id="more"></a>
                    <hr>
                    <h4 class="sub-header mt-5">Last 100 messages</h4>
                    <div class="mb-3">
                        <div class="card-deck">
                            <div class="card card-inverse card-success">
                                <div class="card-body">
                                    <blockquote class="card-blockquote">
                                        <p>INFO 22/03/2024 10:10:52</p>
                                        <p>Temperature:20, Humidity:60, Light:90</p>
                                    </blockquote>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <div class="card-deck">
                            <div class="card card-inverse card-success">
                                <div class="card-body">
                                    <blockquote class="card-blockquote">
                                        <p>INFO 22/03/2024 10:10:52</p>
                                        <p>Temperature:20, Humidity:60, Light:90</p>
                                    </blockquote>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--/.container-->
        <footer class="container-fluid">
            
        </footer>
        <!-- Modal -->
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="myModalLabel">Modal</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                            <span class="sr-only">Close</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>This is a dashboard layout for Bootstrap 4. This is an example of the Modal component which you can use to show content. Any content can be placed inside the modal and it can use the Bootstrap grid classes.</p>
                        <p>
                            <a href="https://www.codeply.com/go/KrUO8QpyXP" target="_ext">Grab the code at Codeply</a>
                        </p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                        <button type="button" class="btn btn-primary-outline" data-dismiss="modal">OK</button>
                    </div>
                </div>
            </div>
        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
        <script src="main.js"></script>
        <script>
            $(document).ready(function(){
                $('[data-toggle=offcanvas]').click(function() {
                    $('.row-offcanvas').toggleClass('active');
                 });

                GetLastMeasurement().then(data => 
                    {
                        $("#monitor-date").html(data.datetime);

                        renderMeasurementTilesInfo("temperature", data);
                        renderMeasurementTilesInfo("humidity", data);
                        renderMeasurementTilesInfo("light", data);
                    });
            });
        </script>
      </body>
    </html>